{
  "name": "opentok",
  "description": "OpenTokSDK for node.js",
  "version": "1.0.2",
  "homepage": "https://github.com/opentok/opentok",
  "repository": {
    "type": "git",
    "url": "https://github.com/opentok/opentok.git"
  },
  "contributors": [
    {
      "name": "Brian Stoner",
      "email": "bsstoner@gmail.com",
      "url": "http://brianstoner.com"
    },
    {
      "name": "Song Zheng",
      "email": "song@tokbox.com"
    },
    {
      "name": "Ankur Oberoi",
      "email": "aoberoi@gmail.com"
    }
  ],
  "main": "./lib/opentok",
  "directories": {
    "lib": "lib"
  },
  "engines": {
    "node": "*"
  },
  "devDependencies": {
    "jasmine-node": "1.0.x"
  },
  "readme": "<div align=\"center\">\n<a href=\"http://tokbox.com/\">\n<img src=\"https://swww.tokbox.com/img/img_www_platform_devices.jpg\" style=\"margin: 0 auto;\" alt=\"Open Tok\" />\n</a>\n</div>\n\n# OpenTokSDK for Node.js\n\nOpenTok is a free set of APIs from TokBox that enables websites to weave live group video communication into their online experience. With OpenTok you have the freedom and flexibility to create the most engaging web experience for your users. OpenTok is currently available as a JavaScript and ActionScript 3.0 library. Check out <http://www.tokbox.com/> and <http://www.tokbox.com/opentok/tools/js/gettingstarted> for more information.\n\nThis is the OpenTok NodeJS Module.\n\n* [Installation](#installation)\n* [How to use](#how-to-use)\n * [Require the opentok module](#require-the-opentok-module)\n * [API key and API secret](#api-key-and-api-secret)\n * [OpenTokSDK](#opentoksdk)\n * [Creating Sessions](#creating-sessions)\n * [Generating Token](#generating-token)\n * [Downloading Archive Videos](#downloading-archive-videos)\n * [Get Archive Manifest](#get-archive-manifest)\n * [Get video ID](#get-video-id)\n * [Get Download URL](#get-download-url)\n* [Example](#example)\n* [Want to contribute?](#want-to-contribute)\n\n\n## Installation\n\nTo install using npm, add OpenTok to `package.json` and run `npm install`:\n\n```javascript\n\"dependencies\" : {  \n    \"opentok\" : \"1.0.x\",  \n    ...\n} \n```\n\nTo install as a regular npm package just type `npm install opentok`\n\n## How to use\n\n### Require the `opentok` module\n\nAdd the following code to the top of any file using the `opentok` module:\n\n    var OpenTok = require('opentok');\n\n### API key and API secret\n\nCreate an account at [TokBox](http://tokbox.com), and sign into your [Dashboard](https://dashboard.tokbox.com) for an API Key and Secret.\n\n### OpenTokSDK\n\nIn order to use any of the server side functions, you must first create an `OpenTokSDK` object with your developer credentials.  \nYou must pass in your *API key* and *API secret*.\n\n```javascript\nvar key = '';    // Replace with your API key  \nvar secret = '';  // Replace with your API secret  \nvar opentok = new OpenTok.OpenTokSDK(key, secret);\n```\n\n### Creating Sessions\nUse your `OpenTokSDK` object to create a `session_id`.\n`createSession` takes 2-3 parameters: \n\n \n#### Parameters \n| Name       | Description                                      | Type   | Optional |\n| ---------- | ------------------------------------------------ | ------ | -------- |\n| location   | Give OpenTok a hint of where the clients connecting will be located by specifiying an IP (e.g. '127.0.0.1') | string | yes |\n| properties | Additional session options                       | object |   yes    |\n| properties['p2p.preference'] | set to 'enabled' or 'disabled' | string |   yes    |\n| callback   | This is a function that handles the server response after session has been created. The result sessionId is a string. |  fn(err, sessionId) |  no  |\n\n\nExample: P2P disabled (default)\n\n```javascript\nvar location = '127.0.0.1'; // use an IP or 'localhost'\nvar sessionId = '';\nopentok.createSession(location, function(err, sessionId){\n  if (err) return throw new Error(\"session creation failed\");\n  // Do things with sessionId\n});\n```\n\nExample: P2P enabled\n\n```javascript\nvar location = '127.0.0.1'; // use an IP of 'localhost'\nvar sessionId = '';\nopentok.createSession(location, {'p2p.preference':'enabled'}, function(err, sessionId){\n  if (err) return throw new Error(\"session creation failed\");\n  // Do things with sessionId\n});\n```\n\n### Generating Token\nWith the generated session_id and an OpenTokSDK object, you can start generating tokens for each user.\n`generateToken` takes in an object with 1-4 properties, and RETURNS a token as a string:\n\n#### Parameters \n\n| Name            | Description                                                                                                          | Type   | Optional |\n| --------------- | -------------------------------------------------------------------------------------------------------------------- |:------:|:--------:|\n| session_id      | This token is tied to the session it is generated with                                                               | string |  no      |\n| role            | opentok.RoleConstants.{SUBSCRIBER&#124;PUBLISHER&#124;MODERATOR}. Publisher role used when omitted.                  | string |  yes     |\n| expire_time     | Time when token will expire in unix timestamp.                                                                       | int    |  yes     |\n| connection_data | Stores static metadata to pass to other users connected to the session. (eg. names, user id, etc)                    | string |  yes     |\n \n\nExample:\n<pre>\nvar token = opentok.generateToken({session_id:session_id, role:OpenTok.RoleConstants.PUBLISHER, connection_data:\"userId:42\"});\n</pre>\n\n### Downloading Archive Videos\nTo Download archived video, you must have an Archive ID (from the client), and a moderator token. For more information see <http://www.tokbox.com/opentok/api/tools/documentation/api/server_side_libraries.html#download_archive>.\n\n#### Quick Overview of the javascript library: <http://www.tokbox.com/opentok/api/tools/js/documentation/api/Session.html#createArchive>\n1. Create an event listener on `archiveCreated` event: `session.addEventListener('archiveCreated', archiveCreatedHandler);`  \n2. Create an archive: `archive = session.createArchive(...);`  \n3. When archive is successfully created `archiveCreatedHandler` would be triggered. An Archive object containing `archiveId` property is passed into your function. Save this in your database, this archiveId is what you use to reference the archive for playbacks and download videos  \n4. After your archive has been created, you can start recording videos into it by calling `session.startRecording(archive)`  \n Optionally, you can also use the standalone archiving, which means that each archive would have only 1 video: <http://www.tokbox.com/opentok/api/tools/js/documentation/api/RecorderManager.html>\n\n### Get Archive Manifest\nWith your **moderator token** and a OpenTokSDK object, you can generate a OpenTokArchive object, which contains information for all videos in the Archive  \n`OpenTokSDK.getArchiveManifest()` takes in 3 parameters: **archiveId** and **moderator token**, and a callback function\n\n\n#### Parameters\n \n| Name            | Description                                                  | Type          | Optional |\n| --------------- | ------------------------------------------------------------ | ------------- | -------- |\n| archive_id      | Get this from the client that created the archive.           | string        |    no    |\n| token           | Get this from the client or the generate_token method.       | string        |    no    |\n| handler         | This function is triggered after it receives the Archive Manifest. The parameter  is an `OpenTokArchive` object. The *resources* property of this object is array of `OpenTokArchiveVideoResource` objects, and each `OpenTokArchiveVideoResource` object represents a video in the archive. | fn(tbarchive) |    no    | \n\n\nExample: (opentok is an OpentokSDK object)\n\n```javascript\nvar token = 'moderator_token';\nvar archiveId = '5f74aee5-ab3f-421b-b124-ed2a698ee939'; // Obtained from Javascript Library\n\nopentok.getArchiveManifest(archiveId, token, function(tbarchive){\n  var otArchive = tbarchive;\n});\n```\n\n### Get video ID\n`OpenTokArchive.resources` is an array of `OpenTokArchiveVideoResource` objects. OpenTokArchiveVideoResource has a `getId()` method that returns the videoId as a string.\n\nExample:\n```javascript\nopentok.getArchiveManifest(archiveId, token, function(tbarchive){\n  var vidID = tbarchive.resources[0].getId();\n});\n```\n\n### Get Download URL\n`OpenTokArchive` objects have a `downloadArchiveURL(video_id, handler)` method that will return a URL string for downloading the video in the archive. Video files are FLV format.\n\n\n#### Parameters\n\n| Name            | Description                                                  | Type          | Optional |\n| --------------- |------------------------------------------------------------- | ------------- | -------- |\n| video_id        | The Video ID returned from OpenTokArchiveVideoResource.getId() | string      |    no    |\n| handler         | This function is triggered after it receives the URL for video. The result is a URL string. | [fn(url)] | no |\n\nExample:\n\n```javascript\nvar url = '';\notArchive.downloadArchiveURL(vidID, function(resp){\n  url = resp;\n});\n```\n\n\n## Example\n\n  Check out the basic working example in examples/app.js\n\n### When done, update package.json version number and publish npm\n\n    npm publish\n\n## Want to contribute?\n### To run test suite:\n    jasmine-node --coffee spec/\n\n\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/opentok/opentok/issues"
  },
  "_id": "opentok@1.0.2",
  "dist": {
    "shasum": "59294c6412a257c21e8a552124aadfdee937f41e"
  },
  "_from": "opentok@1.0.x",
  "_resolved": "https://registry.npmjs.org/opentok/-/opentok-1.0.2.tgz"
}
